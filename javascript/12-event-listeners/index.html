<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>12: Event Listeners | JavaScript Tutorials</title>
	<meta name="description" content="Invoking functions with event listeners, using external function declarations or internal anonymous or arrow functions.">

    <meta name="robots" content="noindex">

    <!-- Stylesheet-->
    <link rel="stylesheet" href="../assets/css/javascript-tutorials.css" />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans+Condensed:wght@700&family=Open+Sans:ital,wght@0,400;0,600;0,700;0,800;1,400;1,600;1,700;1,800&family=Roboto+Mono:ital@0;1&display=swap" rel="stylesheet"> 

    <!-- Font Awesome 6 icons -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

</head>


<body>

<body id="top">

	<header>
		<div class="wrapper">
			<div class="sidebar">
				<div>
					<p>&nbsp;</p>
				</div>
			</div>
	
			<div class="content">
				<h1>12: Event Listeners</h1>
				<h2>Invoking functions with <i>event listeners</i>, using external function declarations or internal anonymous or arrow functions.</h2>
			</div>
		</div><!-- /wrapper -->
	</header>

<main>

	<aside>
		<h3>JAVASCRIPT COURSE</h3>
		<p><i class="fas fa-home"></i> &nbsp;<a href="../index.html">Home</a></p>

		<h3>THIS TUTORIAL</h3>
		<p><a href="#learning-goals">Learning Goals</a></p>
		<p><a href="#event-listeners">About event listeners</a></p>

	</aside>

<article>

<section id="learning-goals">

	<h2>Learning Goals</h2>
	<p>At the end of this Lesson you will be able to:</p>
	<div class="box-goals">
		<ul>
			<li>Invoke functions with event listeners, using external function declarations.</li>
			<li>Invoking functions with event listeners, using internal anonymous or arrow functions.</li>
		</ul>
	</div>

</section>


<section>
	<div class="code-snippets">
		<p>In your <b>javascript/exercises</b> folder, create a new sub-folder named <b>12</b>.</p>
			
		<p>Save the exercise file below to this new <b>javascript/exercises/12</b> sub-folder.</p>
		<p><a href="exercises/index.html" target="_blank"><b>Event Listeners: Exercises</b></a></p>
	</div>	

</section>


<section  id="event-listeners">

	<h2>About event listeners</h2>

	<p>Event listeners are the recommended way to invoke functions within modern JavaScript code. The syntax takes two possible forms:</p>

	<ul>
		<li><b>External function declaration</b>: An event listener can call a stand-alone function located anywhere in the JavaScript program.</li>
		<li><b>Internal anonymous or arrow functions</b>: Alternatively, the code fired by the event listener can positioned inside the event listener itself.</li>
	</ul>

	<p>An advantage of <i>event listeners</i> is that they are always located in the JavaScript code, rather than mixed in with the page content and HTML tags.</p>


</section>


<section>

	<h2>External, anonymous and arrow functions</h2>

	<p>You can work with JavaScript events with any one of three types of functions:  external functions, anonymous functis, and arrow functions.</p>

	<p>In the example below, a function named <b>showBtnClick()</b> that is <i>external</i> to the click event, is used to process the event.</p>

<pre><span class="comment">// get button</span>
const button = document.getElementById('button_1');
<span class="comment">// attach external function without parenthesis ()</span>
button.addEventListener('click', showBtnClick);

<span class="comment">// external function</span>
function showBtnClick() {
    console.log("You clicked button_1")
}</pre>

<p>Another approach is to create an anonymous function internal to the click event. See below.</p>

<pre><span class="comment">// get button</span>
const button = document.getElementById('button_1');
<span class="comment">// attach and create anonymous function with parenthesis ()</span>
button.addEventListener('click', function() {
   console.log("You clicked button_1")
});</pre>

<p>And finally, you can shorten the anonymous function by writing it with the arrow function syntax. See below.</p>

<pre><span class="comment">// get button</span>
const button = document.getElementById('button_1');
<span class="comment">// attach and create anonymous arrow function with parenthesis ()</span>
button.addEventListener('click', () =&gt; {
    console.log("You clicked button_1")
});</pre>


</section>


<section>

	<h2>The JavaScript <code>event</code> object </h2>
	<p>In JavaScript, an event object is an object that contains information about an event that has occurred, such as a mouse click, keypress, or touch. The event object is automatically passed to an event handler function when the event occurs, and it contains properties and methods that allow you to access and manipulate information about the event.</p>

<pre><span class="comment">// get button</span>
const button = document.getElementById('button_1');
<span class="comment">// attach and create anonymous arrow function with parenthesis ()</span>
button.addEventListener('click', function (event) {
    console.log("You clicked the button with an ID of "+event.target.id);
    console.log("The clicked button has a class of " +event.target.className);
});</pre>
		

	<p>In this example, the <span class="syn-js">addEventListener()</span> method is used to attach a click event listener to a button element with an id of <b>button_1</b>. The event listener function is passed the event object as a parameter, which can then be used to access information about the event.</p>
	

<p>Here is the samee example using an arrow function.</p>

<pre><span class="comment">// get button</span>
const button = document.getElementById('button_1');
<span class="comment">// attach and create anonymous arrow function with parenthesis ()</span>
button.addEventListener('click', (event) =&gt; {
    console.log("You clicked the button with an ID of "+event.target.id);
    console.log("The clicked button has a class of " +event.target.className);
});</pre>


<p>The most common properties of a button or other clicked object you will want to access are the <b>id</b> and <b>className</b>.</p>	


<p>Often, the event object is represented simply by the letter e. See below.</p>

<pre>const button = document.getElementById('button_1');
button.addEventListener('click', function(e) {
   console.log(e);
});</pre>

<p>And here is the most concise way of writing the previous arrow function.</p>

<pre><span class="comment">// get button</span>
const button = document.getElementById('button_1');
<span class="comment">// attach and create anonymous arrow function with parenthesis ()</span>
button.addEventListener('click', e =&gt; {
    console.log("You clicked the button with an ID of "+e.target.id);
    console.log("The clicked button has a class of " +e.target.className);
});</pre>


<p>Here is a second example.</p>

<pre>document.addEventListener('keypress', function(event) {
    if (event.key === 'r') {
	  document.body.style.backgroundColor = 'red';
    } else if (event.key === 'g') {
	  document.body.style.backgroundColor = 'green';
    } else if (event.key === 'b') {
	  document.body.style.backgroundColor = 'blue';
    }
});</pre>

<p>In this example, the <span class="syn-js">addEventListener()</span> method is used to attach a keypress event listener to the document object. In this case, the event.key property is used to determine which key was pressed, and the background color of the page is changed accordingly.</p>

</section>

<section>
	<h2>Event capture and bubbling</h2>
	<p>In JavaScript, event capture and bubbling refer to two different ways that events are <i>propagated</i> ('travel') through the DOM (Document Object Model) from the event target to its parent (above) and ancestor (below)elements.</p>

	<h3>Event capture</h3>

	<p>Event capture occurs first and propagates from the top of the DOM tree (the window object) down to the target element. Once the event reaches the target element, it triggers the event listener function that is attached to the target.</p>
		
	<h3>Event bubbling</h3>
	<p>Bubbling, on the other hand, occurs after the event listener function has been triggered and propagates from the target element back up through the DOM tree to the window object. During the bubbling phase, each parent element of the target element also triggers its own event listener function, if one is attached.</p>

	<p>Here's an example to illustrate event capture and bubbling:</p>

<pre>&lt;body
   &lt;div id="outer"&gt;
      &lt;div id="inner"&gt;&lt;/div&gt;
   &lt;/div&gt;
  
	&lt;script&gt;
	  const outer = document.querySelector('#outer');
	  const inner = document.querySelector('#inner');
  
	  outer.addEventListener('click', function() {
		console.log('Outer clicked');
	  }, true); // use capture
  
	  inner.addEventListener('click', function() {
		console.log('Inner clicked');
	  }, false); // use bubbling
	&lt;/script&gt;
  &lt;/body&gt;</pre>


<p>In this example, we have an outer div and an inner div element nested inside it. We've attached a click event listener to each element, using the third parameter of the <span class="syn-js">addEventListener()</span> method to specify whether to use event capture or bubbling.</p>

	<p>When you click on the inner div element, the event first travels down the DOM tree from the window object to the target element, triggering the outer event listener function ("Outer clicked") along the way because we've used event capture. Then, the event reaches the inner div element and triggers its own event listener function ("Inner clicked"). Finally, the event travels back up the DOM tree from the target element to the window object, triggering the outer event listener function ("Outer clicked") again, but this time because we've used event bubbling.</p>

	<h3>Preventing event propagation</h3>
	<p>To prevent event propagation (either event capture or event bubbling) on a button in JavaScript, you can use the <span class="syn-js">event.stopPropagation()</span> method in the event listener function that is attached to the button.</p>

	<p>Here's an example of how to use <span class="syn-js">event.stopPropagation()</span> to prevent event bubbling when a button is clicked:</p>

<pre>const button = document.querySelector('button');

button.addEventListener('click', function(event) {
   event.stopPropagation(); <span class="comment">// prevent event from bubbling up</span>
   console.log('Button clicked');
});
	
document.addEventListener('click', function() {
  console.log('Document clicked');
});</pre>

<p>In this example, we've attached a click event listener to a button element and used <span class="syn-js">event.stopPropagation()</span> to prevent the click event from bubbling up the DOM tree and triggering the click event listener attached to the document object.</p>

<p>Without <span class="syn-js">event.stopPropagation()</span>, when the button is clicked, both the button event listener function ("Button clicked") and the document event listener function ("Document clicked") would be triggered. But now only the button event listener function is triggered and the document event listener function is prevented from being triggered.</p>

</section>

<section>
	<h2>Event delegation</h2>

	<p>Event delegation is a technique in JavaScript that allows you to attach a single event listener to a parent element, which can handle events that are triggered by its child elements. This can be useful when you have many child elements that need event listeners attached to them, as it can reduce the amount of event listeners you need to write and manage.</p>

	<p>Here's an example of using event delegation to handle button clicks based on the button ids:</p>

<pre>const container = document.querySelector('#container');

container.addEventListener('click', function(event) {
   if (event.target.id === 'btn_1') {
      console.log('Button btn_1 clicked');
   }
   else if (event.target.id === 'btn_2') {
	console.log('Button btn_2 clicked');
   }
});</pre>



</section>

<script>
	// const button = document.getElementById('button_1');

	// button.addEventListener('click', showBtnClick);

	// function showBtnClick() {
	// 	console.log("You clicked button_1")
	// }

// get button
// const button = document.getElementById('button_1');
// // attach and create anonymous function with parenthesis ()
// button.addEventListener('click', () => {
//    console.log("You clicked button_1 boo")
// });

// const button = document.getElementById('button_1');
// button.addEventListener('click', e => {
//    console.log("You clicked booo button with an ID of " + e.target.id);
//    console.log("The clicked button has a class of " + e.target.className);
// });

	// button.addEventListener('click', function(event) {
	// 	console.log(event);
	// 	console.log("You clicked button_1")
	// });
</script>

</article>
</main>

<footer>
	
</footer>


</body>
</html>